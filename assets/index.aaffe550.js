(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerpolicy&&(a.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?a.credentials="include":n.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(n){if(n.ep)return;n.ep=!0;const a=r(n);fetch(n.href,a)}})();var N=Object.defineProperty,C=(e,t,r)=>t in e?N(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t,r)=>(C(e,typeof t!="symbol"?t+"":t,r),r);let S=Array.prototype.slice;function M(e,t){for(("length"in e)||(e=[e]),e=S.call(e);e.length;){var r=e.shift(),s=t(r);if(s)return s;r.childNodes&&r.childNodes.length&&(e=S.call(r.childNodes).concat(e))}}const w=(e,t)=>{let r;for(let s=0,n=e.length;s<n;s++){const a=e[s];if(a.id===t){r=a;break}}if(r)return r;throw new Error(`Cannot find ${t} id in ${JSON.stringify(e)}`)},D=e=>{const t={hsl:new RegExp(/^hsla?\(\s*\d{1,3}\s*,\s*\d{1,3}%\s*,\s*\d{1,3}%\s*(,\s*[\d\.]+)?\s*\)$/),hex:new RegExp(/^#[a-f0-9]{3}([a-f0-9]{3})?$/,"i")};for(const r in t)if(t.hasOwnProperty(r)&&t[r].test(e))return r},x=(e,t)=>{for(let r=0,s=t.length;r<s;r++){const n=t[r]||{};for(const a in n)if(n.hasOwnProperty(a)){const o=n[a];o!==void 0&&(e[a]=o)}}return e},m={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},E={};for(const e of Object.keys(m))E[m[e]]=e;const u=Math.pow(6/29,3),c={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(const e of Object.keys(c)){if(!("channels"in c[e]))throw new Error(`missing channels property: ${e}`);if(!("labels"in c[e]))throw new Error(`missing channel labels property: ${e}`);if(c[e].labels.length!==c[e].channels)throw new Error(`channel and label counts mismatch: ${e}`);const{channels:t,labels:r}=c[e];delete c[e].channels,delete c[e].labels,Object.defineProperty(c[e],"channels",{value:t}),Object.defineProperty(c[e],"labels",{value:r})}c.rgb.hsl=function(e){const t=e[0]/255,r=e[1]/255,s=e[2]/255,n=Math.min(t,r,s),a=Math.max(t,r,s),o=a-n;let i=0,l=0;a===n?i=0:t===a?i=(r-s)/o:r===a?i=2+(s-t)/o:s===a&&(i=4+(t-r)/o),i=Math.min(i*60,360),i<0&&(i+=360);const f=(n+a)/2;return a===n?l=0:f<=.5?l=o/(a+n):l=o/(2-a-n),[i,l*100,f*100]};c.rgb.hsv=function(e){let t,r,s,n=0,a=0;const o=e[0]/255,i=e[1]/255,l=e[2]/255,f=Math.max(o,i,l),h=f-Math.min(o,i,l),d=function(p){return(f-p)/6/h+1/2};return h===0?(n=0,a=0):(a=h/f,t=d(o),r=d(i),s=d(l),o===f?n=s-r:i===f?n=1/3+t-s:l===f&&(n=2/3+r-t),n<0?n+=1:n>1&&(n-=1)),[n*360,a*100,f*100]};c.rgb.hwb=function(e){const t=e[0],r=e[1];let s=e[2];const n=c.rgb.hsl(e)[0],a=1/255*Math.min(t,Math.min(r,s));return s=1-1/255*Math.max(t,Math.max(r,s)),[n,a*100,s*100]};c.rgb.cmyk=function(e){const t=e[0]/255,r=e[1]/255,s=e[2]/255,n=Math.min(1-t,1-r,1-s),a=(1-t-n)/(1-n)||0,o=(1-r-n)/(1-n)||0,i=(1-s-n)/(1-n)||0;return[a*100,o*100,i*100,n*100]};function $(e,t){return(e[0]-t[0])**2+(e[1]-t[1])**2+(e[2]-t[2])**2}c.rgb.keyword=function(e){const t=E[e];if(t)return t;let r=1/0,s;for(const n of Object.keys(m)){const a=m[n],o=$(e,a);o<r&&(r=o,s=n)}return s};c.keyword.rgb=function(e){return m[e]};c.rgb.xyz=function(e){let t=e[0]/255,r=e[1]/255,s=e[2]/255;t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92,s=s>.04045?((s+.055)/1.055)**2.4:s/12.92;const n=t*.4124564+r*.3575761+s*.1804375,a=t*.2126729+r*.7151522+s*.072175,o=t*.0193339+r*.119192+s*.9503041;return[n*100,a*100,o*100]};c.rgb.lab=function(e){const t=c.rgb.xyz(e);let r=t[0],s=t[1],n=t[2];r/=95.047,s/=100,n/=108.883,r=r>u?r**(1/3):7.787*r+16/116,s=s>u?s**(1/3):7.787*s+16/116,n=n>u?n**(1/3):7.787*n+16/116;const a=116*s-16,o=500*(r-s),i=200*(s-n);return[a,o,i]};c.hsl.rgb=function(e){const t=e[0]/360,r=e[1]/100,s=e[2]/100;let n,a,o;if(r===0)return o=s*255,[o,o,o];s<.5?n=s*(1+r):n=s+r-s*r;const i=2*s-n,l=[0,0,0];for(let f=0;f<3;f++)a=t+1/3*-(f-1),a<0&&a++,a>1&&a--,6*a<1?o=i+(n-i)*6*a:2*a<1?o=n:3*a<2?o=i+(n-i)*(2/3-a)*6:o=i,l[f]=o*255;return l};c.hsl.hsv=function(e){const t=e[0];let r=e[1]/100,s=e[2]/100,n=r;const a=Math.max(s,.01);s*=2,r*=s<=1?s:2-s,n*=a<=1?a:2-a;const o=(s+r)/2,i=s===0?2*n/(a+n):2*r/(s+r);return[t,i*100,o*100]};c.hsv.rgb=function(e){const t=e[0]/60,r=e[1]/100;let s=e[2]/100;const n=Math.floor(t)%6,a=t-Math.floor(t),o=255*s*(1-r),i=255*s*(1-r*a),l=255*s*(1-r*(1-a));switch(s*=255,n){case 0:return[s,l,o];case 1:return[i,s,o];case 2:return[o,s,l];case 3:return[o,i,s];case 4:return[l,o,s];case 5:return[s,o,i]}};c.hsv.hsl=function(e){const t=e[0],r=e[1]/100,s=e[2]/100,n=Math.max(s,.01);let a,o;o=(2-r)*s;const i=(2-r)*n;return a=r*n,a/=i<=1?i:2-i,a=a||0,o/=2,[t,a*100,o*100]};c.hwb.rgb=function(e){const t=e[0]/360;let r=e[1]/100,s=e[2]/100;const n=r+s;let a;n>1&&(r/=n,s/=n);const o=Math.floor(6*t),i=1-s;a=6*t-o,(o&1)!==0&&(a=1-a);const l=r+a*(i-r);let f,h,d;switch(o){default:case 6:case 0:f=i,h=l,d=r;break;case 1:f=l,h=i,d=r;break;case 2:f=r,h=i,d=l;break;case 3:f=r,h=l,d=i;break;case 4:f=l,h=r,d=i;break;case 5:f=i,h=r,d=l;break}return[f*255,h*255,d*255]};c.cmyk.rgb=function(e){const t=e[0]/100,r=e[1]/100,s=e[2]/100,n=e[3]/100,a=1-Math.min(1,t*(1-n)+n),o=1-Math.min(1,r*(1-n)+n),i=1-Math.min(1,s*(1-n)+n);return[a*255,o*255,i*255]};c.xyz.rgb=function(e){const t=e[0]/100,r=e[1]/100,s=e[2]/100;let n,a,o;return n=t*3.2404542+r*-1.5371385+s*-.4985314,a=t*-.969266+r*1.8760108+s*.041556,o=t*.0556434+r*-.2040259+s*1.0572252,n=n>.0031308?1.055*n**(1/2.4)-.055:n*12.92,a=a>.0031308?1.055*a**(1/2.4)-.055:a*12.92,o=o>.0031308?1.055*o**(1/2.4)-.055:o*12.92,n=Math.min(Math.max(0,n),1),a=Math.min(Math.max(0,a),1),o=Math.min(Math.max(0,o),1),[n*255,a*255,o*255]};c.xyz.lab=function(e){let t=e[0],r=e[1],s=e[2];t/=95.047,r/=100,s/=108.883,t=t>u?t**(1/3):7.787*t+16/116,r=r>u?r**(1/3):7.787*r+16/116,s=s>u?s**(1/3):7.787*s+16/116;const n=116*r-16,a=500*(t-r),o=200*(r-s);return[n,a,o]};c.lab.xyz=function(e){const t=e[0],r=e[1],s=e[2];let n,a,o;a=(t+16)/116,n=r/500+a,o=a-s/200;const i=a**3,l=n**3,f=o**3;return a=i>u?i:(a-16/116)/7.787,n=l>u?l:(n-16/116)/7.787,o=f>u?f:(o-16/116)/7.787,n*=95.047,a*=100,o*=108.883,[n,a,o]};c.lab.lch=function(e){const t=e[0],r=e[1],s=e[2];let n;n=Math.atan2(s,r)*360/2/Math.PI,n<0&&(n+=360);const a=Math.sqrt(r*r+s*s);return[t,a,n]};c.lch.lab=function(e){const t=e[0],r=e[1],s=e[2]/360*2*Math.PI,n=r*Math.cos(s),a=r*Math.sin(s);return[t,n,a]};c.rgb.ansi16=function(e,t=null){const[r,s,n]=e;let a=t===null?c.rgb.hsv(e)[2]:t;if(a=Math.round(a/50),a===0)return 30;let o=30+(Math.round(n/255)<<2|Math.round(s/255)<<1|Math.round(r/255));return a===2&&(o+=60),o};c.hsv.ansi16=function(e){return c.rgb.ansi16(c.hsv.rgb(e),e[2])};c.rgb.ansi256=function(e){const t=e[0],r=e[1],s=e[2];return t>>4===r>>4&&r>>4===s>>4?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(s/255*5)};c.ansi16.rgb=function(e){let t=e%10;if(t===0||t===7)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];const r=(~~(e>50)+1)*.5,s=(t&1)*r*255,n=(t>>1&1)*r*255,a=(t>>2&1)*r*255;return[s,n,a]};c.ansi256.rgb=function(e){if(e>=232){const a=(e-232)*10+8;return[a,a,a]}e-=16;let t;const r=Math.floor(e/36)/5*255,s=Math.floor((t=e%36)/6)/5*255,n=t%6/5*255;return[r,s,n]};c.rgb.hex=function(e){const t=(((Math.round(e[0])&255)<<16)+((Math.round(e[1])&255)<<8)+(Math.round(e[2])&255)).toString(16).toUpperCase();return"000000".substring(t.length)+t};c.hex.rgb=function(e){const t=e.toString().match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];let r=t[0];t[0].length===3&&(r=r.split("").map(i=>i+i).join(""));const s=parseInt(r,16),n=s>>16&255,a=s>>8&255,o=s&255;return[n,a,o]};c.rgb.hcg=function(e){const t=e[0]/255,r=e[1]/255,s=e[2]/255,n=Math.max(Math.max(t,r),s),a=Math.min(Math.min(t,r),s),o=n-a;let i,l;return o<1?i=a/(1-o):i=0,o<=0?l=0:n===t?l=(r-s)/o%6:n===r?l=2+(s-t)/o:l=4+(t-r)/o,l/=6,l%=1,[l*360,o*100,i*100]};c.hsl.hcg=function(e){const t=e[1]/100,r=e[2]/100,s=r<.5?2*t*r:2*t*(1-r);let n=0;return s<1&&(n=(r-.5*s)/(1-s)),[e[0],s*100,n*100]};c.hsv.hcg=function(e){const t=e[1]/100,r=e[2]/100,s=t*r;let n=0;return s<1&&(n=(r-s)/(1-s)),[e[0],s*100,n*100]};c.hcg.rgb=function(e){const t=e[0]/360,r=e[1]/100,s=e[2]/100;if(r===0)return[s*255,s*255,s*255];const n=[0,0,0],a=t%1*6,o=a%1,i=1-o;let l=0;switch(Math.floor(a)){case 0:n[0]=1,n[1]=o,n[2]=0;break;case 1:n[0]=i,n[1]=1,n[2]=0;break;case 2:n[0]=0,n[1]=1,n[2]=o;break;case 3:n[0]=0,n[1]=i,n[2]=1;break;case 4:n[0]=o,n[1]=0,n[2]=1;break;default:n[0]=1,n[1]=0,n[2]=i}return l=(1-r)*s,[(r*n[0]+l)*255,(r*n[1]+l)*255,(r*n[2]+l)*255]};c.hcg.hsv=function(e){const t=e[1]/100,r=e[2]/100,s=t+r*(1-t);let n=0;return s>0&&(n=t/s),[e[0],n*100,s*100]};c.hcg.hsl=function(e){const t=e[1]/100,r=e[2]/100*(1-t)+.5*t;let s=0;return r>0&&r<.5?s=t/(2*r):r>=.5&&r<1&&(s=t/(2*(1-r))),[e[0],s*100,r*100]};c.hcg.hwb=function(e){const t=e[1]/100,r=e[2]/100,s=t+r*(1-t);return[e[0],(s-t)*100,(1-s)*100]};c.hwb.hcg=function(e){const t=e[1]/100,r=1-e[2]/100,s=r-t;let n=0;return s<1&&(n=(r-s)/(1-s)),[e[0],s*100,n*100]};c.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]};c.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]};c.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]};c.gray.hsl=function(e){return[0,0,e[0]]};c.gray.hsv=c.gray.hsl;c.gray.hwb=function(e){return[0,100,e[0]]};c.gray.cmyk=function(e){return[0,0,0,e[0]]};c.gray.lab=function(e){return[e[0],0,0]};c.gray.hex=function(e){const t=Math.round(e[0]/100*255)&255,r=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(r.length)+r};c.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]};function O(){const e={},t=Object.keys(c);for(let r=t.length,s=0;s<r;s++)e[t[s]]={distance:-1,parent:null};return e}function T(e){const t=O(),r=[e];for(t[e].distance=0;r.length;){const s=r.pop(),n=Object.keys(c[s]);for(let a=n.length,o=0;o<a;o++){const i=n[o],l=t[i];l.distance===-1&&(l.distance=t[s].distance+1,l.parent=s,r.unshift(i))}}return t}function A(e,t){return function(r){return t(e(r))}}function j(e,t){const r=[t[e].parent,e];let s=c[t[e].parent][e],n=t[e].parent;for(;t[n].parent;)r.unshift(t[n].parent),s=A(c[t[n].parent][n],s),n=t[n].parent;return s.conversion=r,s}function I(e){const t=T(e),r={},s=Object.keys(t);for(let n=s.length,a=0;a<n;a++){const o=s[a];t[o].parent!==null&&(r[o]=j(o,t))}return r}const b={},q=Object.keys(c);function L(e){const t=function(...r){const s=r[0];return s==null?s:(s.length>1&&(r=s),e(r))};return"conversion"in e&&(t.conversion=e.conversion),t}function P(e){const t=function(...r){const s=r[0];if(s==null)return s;s.length>1&&(r=s);const n=e(r);if(typeof n=="object")for(let a=n.length,o=0;o<a;o++)n[o]=Math.round(n[o]);return n};return"conversion"in e&&(t.conversion=e.conversion),t}q.forEach(e=>{b[e]={},Object.defineProperty(b[e],"channels",{value:c[e].channels}),Object.defineProperty(b[e],"labels",{value:c[e].labels});const t=I(e);Object.keys(t).forEach(r=>{const s=t[r];b[e][r]=P(s),b[e][r].raw=L(s)})});var z=function(e,t,r,s){var n,a=0;typeof t!="boolean"&&(s=r,r=t,t=void 0);function o(){var i=this,l=Number(new Date)-a,f=arguments;function h(){a=Number(new Date),r.apply(i,f)}function d(){n=void 0}s&&!n&&h(),n&&clearTimeout(n),s===void 0&&l>e?h():t!==!0&&(n=setTimeout(s?d:h,s===void 0?e-l:e))}return o};const Y={stageSwitchTransition:800,stageSwitchDelay:0,stageSwitchEasing:"cubic-bezier(.86, 0, .07, 1)",disableAfterSwitching:500,stages:[]},H={scrollNumber:1,transition:200,easing:"ease",items:[]},k=new RegExp(/-?\d+(?:\.\d+)?/,"g"),V=["webkit","ms","moz",""];class y{constructor(t,r){if(g(this,"target"),g(this,"config"),g(this,"animating"),g(this,"switching"),g(this,"stages"),g(this,"activeStageIndex"),g(this,"boundHandleScroll"),g(this,"throttledHandleStepChange"),g(this,"activeStage"),g(this,"switchingTimeout"),g(this,"animatingTimeout"),typeof t=="string"&&(t=document.querySelector(t)),!t||t.nodeType!==1)throw new Error("Cannot find target dom to apply scroll effects");r=x({},[Y,r]),t.style.overflow="hidden",this.target=t,this.config=r,this.animating=!1,this.switching=!1,this.stages=[],this.activeStageIndex=0,this.initStages(),this.processStages(),this.defineActiveStage(),this.addEventListeners()}defineActiveStage(){let t=this.stages[this.activeStageIndex];const r=this;Object.defineProperty(this,"activeStage",{get:function(){return t},set:function(s){if(s===t)return;const n=JSON.parse(JSON.stringify(t));t=s,r.activeStageIndex=r.stages.findIndex(a=>a===s),r.handleActiveStageChange(),r.target.dispatchEvent(new CustomEvent("stage-change",{detail:{previous:{id:n.id,node:n.node,config:n.stageConfig,step:n.step},current:{id:s.id,node:s.node,config:s.stageConfig}}}))}})}addEventListeners(){this.boundHandleScroll=this.handleScroll.bind(this),this.throttledHandleStepChange=z(50,!0,this.handleStepChange,!0),document.addEventListener("wheel",this.boundHandleScroll)}removeEventListeners(){document.removeEventListener("wheel",this.boundHandleScroll)}initStages(){M(this.target,t=>{if(t.nodeType!==1)return;const r=t.getAttribute("data-scroll-stage-id");if(r){const s=w(this.config.stages,r);if(!s)throw new Error(`
            Missing scrolling config for stage id: ${r}
          `);t.style.transition=`
          ${this.config.stageSwitchTransition}ms ${this.config.stageSwitchEasing} ${this.config.stageSwitchDelay}ms
        `,this.stages.push({node:t,stageConfig:x({},[H,s]),id:r,step:0})}})}processStages(){this.stages.forEach(t=>{y.attachNodeToItems(t),this.processItemEffects(t)})}static attachNodeToItems(t){M(t.node,r=>{if(r.nodeType!==1)return;const s=r.getAttribute("data-scroll-item-id");if(s){const n=w(t.stageConfig.items,s);if(!n)throw new Error(`Missing scrolling config for item id: ${s}`);n.node=r}})}processItemEffects(t){t.stageConfig.items.forEach(r=>{r.effects.forEach(s=>{s.startAt===void 0&&(s.startAt=0),s.endAt===void 0&&(s.endAt=Number(t.stageConfig.scrollNumber)),y.processColorValues(s),s.startNumbers=(s.start.match(k)||[]).map(n=>Number(n)),s.endNumbers=(s.end.match(k)||[]).map(n=>Number(n)),s.strings=s.start.split(k)})})}static getCurrentStyleValue(t,r){const{startAt:s,endAt:n,startNumbers:a,endNumbers:o,strings:i,isColor:l}=t;r=Math.min(n,Math.max(s,r));let f=i[0],h=-1;return a&&a.length>0&&a.forEach((d,p)=>{/rgba/.test(i[p])&&(h=p+3);let v=d+(r-s)*(o[p]-d)/(n-s);l&&p!==h&&(v=Math.round(v)),f+=`${v}${i[p+1]}`}),f}static processColorValues(t){["start","end"].forEach(r=>{let s=t[r];const n=D(s);if(n){if(t.isColor=!0,n==="hex")s=`
          rgb(${b.hex.rgb(s).join(",")})
        `;else if(n==="hsl"){const[a,o,i,l]=s.match(/hsla?\((.*)\)/)[1].split(/\s*,\s*/).map(f=>parseFloat(f));s=`
          rgba(${b.hsl.rgb([a,o,i]).join(",")}, ${l===void 0?1:l})
        `}t[r]=s}})}setActiveStage(t,r=!1){if(this.activeStage.id===t)return;const s=this.activeStageIndex;this.activeStage.step=0;const n=w(this.stages,t)||this.stages[0],a=this.stages.findIndex(o=>o===n);r?(n.step=s<a?0:Number(n.stageConfig.scrollNumber),this.activeStage=n,this.handleStepChange(!1,!1)):(this.activeStage=n,this.handleStepChange(!1,!1))}handleActiveStageChange(){clearTimeout(this.switchingTimeout),this.switching=!0,this.stages.forEach(t=>{V.forEach(r=>{const s=r.length?`${r}Transform`:"transform";t.node.style[s]=`translateY(${-this.activeStageIndex*100}%)`})}),this.switchingTimeout=setTimeout(t=>{this.switching=!1},Number(this.config.stageSwitchTransition)+Number(this.config.disableAfterSwitching))}setStep(t){const r=typeof t;if(r!=="number")throw new Error(`step should be a number, got ${r}`);if(t<0||t>Number(this.activeStage.stageConfig.scrollNumber))throw new Error(`
        step should be within [0, ${this.activeStage.stageConfig.scrollNumber}], got ${t}
      `);this.activeStage.step!==t&&(this.activeStage.step=t,this.handleStepChange())}getActiveStage(){return this.activeStage}getStep(){return this.activeStage.step}handleStepChange(t=!0,r=!0){const s=this.activeStage.step,n=this.activeStage.stageConfig,a=this.activeStageIndex;if(s>Number(n.scrollNumber)){if(a===this.stages.length-1){this.target.dispatchEvent(new CustomEvent("scroll-out",{detail:{direction:"bottom"}})),this.activeStage.step=Number(n.scrollNumber);return}this.setActiveStage(this.stages[a+1].id,!0)}else if(s<0){if(a===0){this.target.dispatchEvent(new CustomEvent("scroll-out",{detail:{direction:"top"}})),this.activeStage.step=0;return}this.setActiveStage(this.stages[a-1].id,!0)}else clearTimeout(this.animatingTimeout),this.animating=!0,n.items.forEach(o=>{o.node.style.transition=t?`${n.transition}ms ${n.easing}`:"none",o.effects.forEach(i=>{o.node.style[i.property]=y.getCurrentStyleValue(i,s)})}),r&&this.target.dispatchEvent(new CustomEvent("step-change",{detail:{activeStage:{id:this.activeStage.id,node:this.activeStage.node,config:n},current:s}})),this.animatingTimeout=setTimeout(o=>{this.animating=!1},t?Number(n.transition):0)}handleScroll(t){t.preventDefault(),!(this.animating||this.switching)&&(this.activeStage.step+=t.deltaY>0?1:-1,this.throttledHandleStepChange())}destroy(){this.removeEventListeners()}restore(){this.addEventListeners()}}const X=[{id:"basic",scrollNumber:120,transition:0,easing:"linear",items:[{id:"backstage",effects:[{property:"transform",start:"translateY(0px)",end:"translateY(-100px)"}]},{id:"middlestage",effects:[{property:"transform",start:"translateY(0px)",end:"translateY(-180px)"}]},{id:"frontstage",effects:[{property:"transform",start:"translateY(0px)",end:"translateY(-700px)"}]}]},{id:"color",scrollNumber:7,transition:200,items:[{id:"battery",effects:[{property:"width",start:"125px",end:"250px"},{property:"backgroundColor",start:"#fd0",end:"#209b35"}]},{id:"text",effects:[{property:"color",start:"#fd0",end:"#209b35"}]}]},{id:"svg",scrollNumber:1,transition:2e3,easing:"linear",items:[{id:"offset1",effects:[{property:"strokeDashoffset",start:"2098",end:"0"}]},{id:"offset2",effects:[{property:"strokeDashoffset",start:"406",end:"0"}]},{id:"offset3",effects:[{property:"strokeDashoffset",start:"540",end:"0"}]},{id:"offset4",effects:[{property:"strokeDashoffset",start:"485",end:"0"}]},{id:"offset5",effects:[{property:"strokeDashoffset",start:"81",end:"0"}]},{id:"offset6",effects:[{property:"strokeDashoffset",start:"25",end:"0"}]},{id:"offset7",effects:[{property:"strokeDashoffset",start:"41",end:"0"}]},{id:"offset8",effects:[{property:"strokeDashoffset",start:"224",end:"0"}]},{id:"offset9",effects:[{property:"strokeDashoffset",start:"66",end:"0"}]},{id:"offset10",effects:[{property:"strokeDashoffset",start:"53",end:"0"}]},{id:"offset11",effects:[{property:"strokeDashoffset",start:"192",end:"0"}]},{id:"offset12",effects:[{property:"strokeDashoffset",start:"263",end:"0"}]},{id:"offset13",effects:[{property:"strokeDashoffset",start:"353",end:"0"}]},{id:"offset14",effects:[{property:"strokeDashoffset",start:"80",end:"0"}]},{id:"offset15",effects:[{property:"strokeDashoffset",start:"80",end:"0"}]},{id:"offset16",effects:[{property:"strokeDashoffset",start:"81",end:"0"}]},{id:"offset17",effects:[{property:"strokeDashoffset",start:"80",end:"0"}]},{id:"offset18",effects:[{property:"strokeDashoffset",start:"358",end:"0"}]},{id:"offset19",effects:[{property:"strokeDashoffset",start:"149",end:"0"}]},{id:"offset20",effects:[{property:"strokeDashoffset",start:"40",end:"0"}]},{id:"offset21",effects:[{property:"strokeDashoffset",start:"32",end:"0"}]},{id:"offset22",effects:[{property:"strokeDashoffset",start:"49",end:"0"}]},{id:"offset23",effects:[{property:"strokeDashoffset",start:"101",end:"0"}]},{id:"offset24",effects:[{property:"strokeDashoffset",start:"113",end:"0"}]},{id:"offset25",effects:[{property:"strokeDashoffset",start:"91",end:"0"}]},{id:"opacity1",effects:[{property:"opacity",start:"0",end:"1"}]},{id:"opacity2",effects:[{property:"opacity",start:"0",end:"1"}]},{id:"opacity3",effects:[{property:"opacity",start:"0",end:"1"}]},{id:"opacity4",effects:[{property:"opacity",start:"0",end:"1"}]},{id:"opacity5",effects:[{property:"opacity",start:"0",end:"1"}]},{id:"opacity6",effects:[{property:"opacity",start:"0",end:"1"}]},{id:"opacity7",effects:[{property:"opacity",start:"0",end:"1"}]},{id:"opacity8",effects:[{property:"opacity",start:"0",end:"1"}]},{id:"opacity9",effects:[{property:"opacity",start:"0",end:"1"}]},{id:"opacity10",effects:[{property:"opacity",start:"0",end:"1"}]},{id:"opacity11",effects:[{property:"opacity",start:"0",end:"1"}]},{id:"opacity12",effects:[{property:"opacity",start:"0",end:"1"}]},{id:"opacity13",effects:[{property:"opacity",start:"0",end:"1"}]},{id:"opacity14",effects:[{property:"opacity",start:"0",end:"1"}]},{id:"shadow",effects:[{property:"transform",start:"translateX(0%)",end:"translateX(100%)"}]}]},{id:"transform",scrollNumber:8,transition:500,items:[{id:"showcase",effects:[{property:"transform",start:"rotateX(0deg)",end:"rotateX(320deg)"}]}]}],F={stages:X};function J(){new y("#wrap",F)}window.onload=J;
